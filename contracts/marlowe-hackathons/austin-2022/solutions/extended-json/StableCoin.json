{"timeout":{"time_param":"Deposit Deadline"},"when":[{"then":{"timeout":{"time_param":"Deposit Deadline"},"when":[{"then":{"timeout":{"time_param":"Deposit Deadline"},"when":[{"then":{"timeout":{"time_param":"Withdrawal Deadline"},"when":[{"then":{"timeout":{"time_param":"Withdrawal Deadline"},"when":[{"then":{"then":{"then":{"then":"close","to":{"party":{"role_token":"Party"}},"from_account":{"role_token":"Counterparty"},"pay":{"else":{"amount_of_token":{"currency_symbol":"","token_name":""},"in_account":{"role_token":"Counterparty"}},"then":{"use_value":"Stable Payment"},"if":{"le_than":{"amount_of_token":{"currency_symbol":"","token_name":""},"in_account":{"role_token":"Counterparty"}},"value":{"use_value":"Stable Payment"}}},"token":{"currency_symbol":"","token_name":""}},"let":"Stable Payment","be":{"divide":{"multiply":{"constant_param":"Stable Deposit"},"times":{"value_of_choice":{"choice_name":"Initial Price","choice_owner":{"role_token":"Price Oracle"}}}},"by":{"value_of_choice":{"choice_name":"Final Price","choice_owner":{"role_token":"Price Oracle"}}}}},"to":{"account":{"role_token":"Counterparty"}},"from_account":{"role_token":"Party"},"pay":{"amount_of_token":{"currency_symbol":"","token_name":""},"in_account":{"role_token":"Party"}},"token":{"currency_symbol":"","token_name":""}},"case":{"for_choice":{"choice_name":"Final Price","choice_owner":{"role_token":"Price Oracle"}},"choose_between":[{"from":1,"to":1000000000}]}}],"timeout_continuation":"close"},"case":{"for_choice":{"choice_name":"Request Withdrawal","choice_owner":{"role_token":"Party"}},"choose_between":[{"from":1,"to":1}]}}],"timeout_continuation":"close"},"case":{"deposits":{"multiply":{"minus":1,"value":{"constant_param":"Reserve Ratio"}},"times":{"constant_param":"Stable Deposit"}},"into_account":{"role_token":"Counterparty"},"of_token":{"currency_symbol":"","token_name":""},"party":{"role_token":"Counterparty"}}}],"timeout_continuation":"close"},"case":{"for_choice":{"choice_name":"Initial Price","choice_owner":{"role_token":"Price Oracle"}},"choose_between":[{"from":1,"to":1000000000}]}}],"timeout_continuation":"close"},"case":{"deposits":{"constant_param":"Stable Deposit"},"into_account":{"role_token":"Party"},"of_token":{"currency_symbol":"","token_name":""},"party":{"role_token":"Party"}}}],"timeout_continuation":"close"}